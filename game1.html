<!DOCTYPE html>
<html>
<head>
<title>Snake Game - Mobile Ready</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    font-family: Arial;
    text-align: center;
    min-height: 100vh;
    overflow: hidden;
}
canvas {
    border: 4px solid #00ff00;
    background: #000;
    display: block;
    margin: 20px auto;
    box-shadow: 0 0 20px rgba(0,255,0,0.5);
    max-width: 95vw;
    max-height: 60vh;
}
h2 { color: #00ff00; margin: 10px 0; font-size: 24px; }
#score { color: #00ff00; font-size: 20px; margin: 10px; }
#counter {
    position: fixed; top: 10px; right: 10px;
    background: rgba(0,255,0,0.9); color: black;
    padding: 10px; border-radius: 10px; font-weight: bold;
    font-size: 16px; z-index: 1000;
}
#controls {
    position: fixed; bottom: 20px; left: 50%;
    transform: translateX(-50%);
    display: flex; flex-direction: column; align-items: center;
    z-index: 1000; padding: 20px;
}
.control-row { display: flex; gap: 15px; margin: 10px 0; }
.btn {
    width: 80px; height: 80px; font-size: 28px;
    background: rgba(0,255,0,0.3); color: #00ff00;
    border: 3px solid #00ff00; border-radius: 15px;
    cursor: pointer; user-select: none;
    backdrop-filter: blur(10px);
}
.btn:active { background: #00ff00; color: black; transform: scale(0.95); }
@media (min-width: 768px) { #controls { display: none; } }
@media (max-width: 480px) { .btn { width: 70px; height: 70px; font-size: 24px; } }
</style>
</head>
<body>
<div id="counter">
Visitors: <span id="count">0</span>
</div>

<h2>üêç Snake Game - Touch Controls</h2>
<canvas id="canvas" width="400" height="400"></canvas>
<p id="score">Score: 0</p>

<div id="controls">
  <div class="control-row">
    <button class="btn" id="up">‚Üë</button>
  </div>
  <div class="control-row">
    <button class="btn" id="left">‚Üê</button>
    <button class="btn" id="down">‚Üì</button>
    <button class="btn" id="right">‚Üí</button>
  </div>
</div>

<script>
// COUNTER
let count = localStorage.getItem('game1_visits') || 0;
count = parseInt(count) + 1;
localStorage.setItem('game1_visits', count);
document.getElementById('count').textContent = count;

// GAME
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
const grid = 20;
let snake = [{x: 10, y: 10}];
let dx = 1, dy = 0;
let food = {x: 15, y: 15};
let score = 0;
let gameRunning = true;

function drawGame() {
    ctx.clearRect(0, 0, 400, 400);
    // Food
    ctx.fillStyle = '#ff4444';
    ctx.shadowColor = '#ff0000';
    ctx.shadowBlur = 10;
    ctx.fillRect(food.x * grid + 4, food.y * grid + 4, grid - 8, grid - 8);
    ctx.shadowBlur = 0;
    // Snake
    ctx.fillStyle = '#00ff00';
    ctx.shadowColor = '#00ff00';
    ctx.shadowBlur = 15;
    snake.forEach((part, i) => {
        ctx.fillRect(part.x * grid + 2, part.y * grid + 2, grid - 4, grid - 4);
    });
    ctx.shadowBlur = 0;
}

function update() {
    if (!gameRunning) return;
    const head = {x: snake[0].x + dx, y: snake[0].y + dy};

    if (head.x < 0 || head.x >= 20 || head.y < 0 || head.y >= 20 ||
        snake.find((p, i) => i > 0 && p.x === head.x && p.y === head.y)) {
        gameRunning = false;
        setTimeout(() => {
            alert('Game Over! Score: ' + score + '\nRefresh to play again!');
            location.reload();
        }, 100);
        return;
    }

    snake.unshift(head);
    if (head.x === food.x && head.y === food.y) {
        score++;
        document.getElementById('score').textContent = 'Score: ' + score;
        food = {x: Math.floor(Math.random() * 20), y: Math.floor(Math.random() * 20)};
    } else {
        snake.pop();
    }
    drawGame();
}

function resetGame() {
    snake = [{x: 10, y: 10}]; dx = 1; dy = 0; score = 0;
    food = {x: 15, y: 15}; gameRunning = true;
    document.getElementById('score').textContent = 'Score: 0';
    drawGame();
}

// CONTROLS
document.addEventListener('keydown', e => {
    if (e.key === 'ArrowUp' && dy !== 1) { dy = -1; dx = 0; }
    if (e.key === 'ArrowDown' && dy !== -1) { dy = 1; dx = 0; }
    if (e.key === 'ArrowLeft' && dx !== 1) { dx = -1; dy = 0; }
    if (e.key === 'ArrowRight' && dx !== -1) { dx = 1; dy = 0; }
});
// CONTROLS (keep all existing code...)
['up', 'left', 'down', 'right'].forEach(dir => {
    document.getElementById(dir).onclick = () => {
        if (dir === 'up' && dy !== 1) { dy = -1; dx = 0; }
        if (dir === 'left' && dx !== 1) { dx = -1; dy = 0; }
        if (dir === 'down' && dy !== -1) { dy = 1; dx = 0; }
        if (dir === 'right' && dx !== -1) { dx = 1; dy = 0; }
    };
});

// SLOWER SPEED = 250ms (EASIER)
setInterval(update, 250);
drawGame();
</script>
</body>
</html>
